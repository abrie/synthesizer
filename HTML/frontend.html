<!doctype html>
<html ng-app>
<head>
	<script src="lib/angular.js"></script>
	<script src="frontend.js"></script>
	<script src="utilities.js"></script>
	<link rel="stylesheet" href="frontend.css">
</head>
<body>
	<h2>Node</h2>
	<div ng-controller="NodeCtrl">
		<ul class="unstyled">
			<li ng-repeat="node in nodes">
				<span>{{node.type}}:{{node.name}}</span>
				<ng-switch on="node.type">
					<div ng-switch-when="root">
						<button ng-click="addNewNodeTo(node)" >+branch</button>
						<button ng-click="addNewEmitterTo(node)" >+emitter</button>
						<input ng-model="node.parameters.rhythm.steps">
						<input ng-model="node.parameters.rhythm.steps" type="range" max="100" min="1" >
						<input ng-model="node.parameters.rhythm.pulses">
						<input ng-model="node.parameters.rhythm.pulses" type="range" max="100" min="1" >
						<input ng-model="node.parameters.rhythm.ticksPerStep">
						<input ng-model="node.parameters.rhythm.ticksPerPulse">
						<input ng-model="node.parameters.rhythm.totalTicks">
						<input ng-model="node.parameters.rhythm.retrigger" type="checkbox" >
						<ul class="unstyled">
							<li ng-repeat="nodeName in node.pool">{{nodeName}}</li>
						</ul>                     
					</div>
					<div ng-switch-when="branch">
						<button ng-click="addNewNodeTo(node)" >+branch</button>
						<button ng-click="addNewEmitterTo(node)" >+emitter</button>
						<input ng-model="node.parameters.rhythm.steps">
						<input ng-model="node.parameters.rhythm.steps" type="range" max="100" min="1" >
						<input ng-model="node.parameters.rhythm.pulses">
						<input ng-model="node.parameters.rhythm.pulses" type="range" max="100" min="1" >
						<input ng-model="node.parameters.rhythm.ticksPerStep">
						<input ng-model="node.parameters.rhythm.ticksPerPulse">
						<input ng-model="node.parameters.rhythm.totalTicks">
						<input ng-model="node.parameters.rhythm.retrigger" type="checkbox" >
						<ul class="unstyled">
							<li ng-repeat="nodeName in node.pool">{{nodeName}}</li>
						</ul>                     
					</div>
					<div ng-switch-when="emitter">
						<input ng-model="node.parameters.rhythm.steps">
						<input ng-model="node.parameters.rhythm.steps" type="range" max="100" min="1" >
						<input ng-model="node.parameters.rhythm.pulses">
						<input ng-model="node.parameters.rhythm.pulses" type="range" max="100" min="1" >
						<input ng-model="node.parameters.rhythm.ticksPerStep">
						<input ng-model="node.parameters.rhythm.ticksPerPulse">
						<input ng-model="node.parameters.rhythm.totalTicks">
						<input ng-model="node.parameters.rhythm.retrigger" type="checkbox" >
						<select ng-model="node.parameters.indexer" ng-options="indexer for indexer in indexerTypes"></select>
					</div>
					<div ng-switch-default>
						unknown type
					</div>
				</ng-switch>
			</li>
		</ul>
		<form ng-submit="addRoot()">
			<input type="text" ng-model="nodeName"  size="30" placeholder="add new root here">
			<input class="btn-primary" type="submit" value="+root">
		</form>
		<form ng-submit="addNode()">
			<input type="text" ng-model="nodeName"  size="30" placeholder="add new node here">
			<input class="btn-primary" type="submit" value="+branch">
		</form>
		<form ng-submit="addEmitter()">
			<input type="text" ng-model="emitterName"  size="30" placeholder="add new emitter here">
			<input class="btn-primary" type="submit" value="+emitter">
		</form>
	</div>
</body>
</html>
